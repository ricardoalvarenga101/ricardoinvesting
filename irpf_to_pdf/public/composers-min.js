function composeOperationsFII(e,t,o){let n=0,a=0,r="";return _.map(e,((e,o)=>{switch(o){case TYPE_OPERATIONS_SELL.VENDA_DE_FII:r=o,e.amountValues>=0?n+=e.amountValues:(a+=e.amountValues,n+=e.amountValues,lossesSalesFii.hasOwnProperty(t)?lossesSalesFii[t]+=a:lossesSalesFii={[t]:a});break}})),r===TYPE_OPERATIONS_SELL.VENDA_DE_FII?n:null}function composeCommonOperationAndDayTrade(e,t,o){let n=0,a=0,r=0,s=0;_.map(e,((e,t)=>{switch(t){case TYPE_OPERATIONS_SELL.SWING_TRADE:case TYPE_OPERATIONS_SELL.VENDA_DE_ETF:case TYPE_OPERATIONS_SELL.DIREITOS_DE_SUBSCRICAO:case TYPE_OPERATIONS_SELL.VENDA_DE_BDR:t===TYPE_OPERATIONS_SELL.SWING_TRADE?(e.amountTransaction>LIMIT_SWING_TRADE||e.amountValues<0)&&(e.amountValues<0?(r+=e.amountValues,n+=e.amountValues):n+=e.amountValues):n+=e.amountValues;break;case TYPE_OPERATIONS_SELL.DAY_TRADE:e.amountValues>=0?a+=e.amountValues:s+=e.amountValues;break}}));return{title:{pageBreak:"before",text:`\n\n${MONTHS_LABEL[o]} - ${year}`,style:"title"},content1:{style:"tableOperation",table:{widths:[200,"*","*"],body:[composeHeaderTable(["Resultados","Operações Comuns","Day-Trade"]),[{text:"Mercado à Vista - Ações",style:{color:"black"}},{text:convertCurrencyReal(n),style:{color:"blue",bold:!0}},convertCurrencyReal(0)]]}},content2:{style:"tableOperation",table:{widths:[200,"*","*"],body:[composeHeaderTable(["Resultados","Operações Comuns","Day-Trade"]),[{text:"RESULTADO LÍQUIDO DO MÊS",style:{color:"black"}},{text:convertCurrencyReal(n),style:{color:"blue",bold:!0}},convertCurrencyReal(0)],[{text:"Resultado negativo até o mês anterior",style:{color:"black"}},convertCurrencyReal(0),convertCurrencyReal(0)],[{text:"BASE DE CÁLCULO DO IMPOSTO",style:{color:"black"}},{text:convertCurrencyReal(n),style:{color:"blue",bold:!0}},convertCurrencyReal(0)],[{text:"Prejuízo a compensar",style:{color:"black"}},convertCurrencyReal(0),convertCurrencyReal(0)],[{text:"Alíquota do imposto",style:{color:"black"}},{text:"15%",style:{color:"black"}},{text:"20%",style:{color:"black"}}],[{text:"IMPOSTO DEVIDO",style:{color:"black"}},{text:taxCal(n,.15),style:{color:"blue",bold:!0}},convertCurrencyReal(0)]]}},content3:{style:"tableOperation",table:{widths:["*","*"],body:[composeHeaderTable([{text:"Consolidação do mês",colSpan:2},{}]),[{text:"Total do imposto devido",style:{color:"black"}},{text:taxCal(n,.15),style:{color:"blue",bold:!0}}],[{text:"IR fonte de Day-Trade no Mês",style:{color:"black"}},convertCurrencyReal(0)],[{text:"IR fonte de Day-Trade nos meses anteriores",style:{color:"black"}},convertCurrencyReal(0)],[{text:"IR fonte de Day-Trade a compensar",style:{color:"black"}},convertCurrencyReal(0)],[{text:"IR fonte (Lei nº 11.033/2004) no mês",style:{color:"black"}},convertCurrencyReal(0)],[{text:"IR fonte (Lei nº 11.033/2004) nos meses anteriores",style:{color:"black"}},convertCurrencyReal(0)],[{text:"IR fonte (Lei nº 11.033/2004) meses a compensar",style:{color:"black"}},convertCurrencyReal(0)],[{text:"Imposto a pagar",style:{color:"black"}},{text:taxCal(n,.15),style:{color:"blue",bold:!0}}],[{text:"Imposto pago",style:{color:"black"}},convertCurrencyReal(0)]]}}}}function composeAmountOperations(e){e.amountTransaction=_.sum(e.transactions),e.amountValues=_.sum(e.values)}function composeOperations(e,t,o,n){return e.hasOwnProperty(o)?e[o].hasOwnProperty(t)?e[o][t].hasOwnProperty(n.operation)?(e[o][t][n.operation].transactions.push(n.transaction),e[o][t][n.operation].values.push(n.value),composeAmountOperations(e[o][t][n.operation])):(e[o][t][n.operation]={transactions:[n.transaction],values:[n.value]},composeAmountOperations(e[o][t][n.operation])):(e[o][t]={[n.operation]:{transactions:[n.transaction],values:[n.value]}},composeAmountOperations(e[o][t][n.operation])):(e[o]={[t]:{[n.operation]:{transactions:[n.transaction],values:[n.value]}}},composeAmountOperations(e[o][t][n.operation])),e}function composeSwingTradeFree(e){_.map(e,((e,t)=>{let o=0;_.map(e,(e=>_.map(e,((e,n)=>{n!==TYPE_OPERATIONS_SELL.SWING_TRADE&&n!==TYPE_OPERATIONS_SELL.VENDA_DE_FI_INFRA||e.amountTransaction<=LIMIT_SWING_TRADE&&(o+=e.amountValues,SUM_SWING_TRADE_FREE[t]=o)}))))}))}function composeListYears(){const e=(new Date).getFullYear(),t=document.getElementById("year_select");let o="";for(let t=e;t>=firstYear;t--)o+=`<option value='${t}'> ${t}</option>`;t.innerHTML=o}function composeProvents(e){e&&e.hasOwnProperty("external")&&e.external;e&&e.hasOwnProperty("external")&&delete e.external;const t=Object.keys(e).sort(),o=[],n=[],a=[],r=[];return t.forEach((t=>{e[t].amountDividend&&o.push(["09",e[t].document_number_principal,e[t].name,convertCurrencyReal(e[t].amountDividend)]),e[t].amountJcp&&n.push(["10",e[t].document_number_principal,e[t].name,convertCurrencyReal(e[t].amountJcp||0)]),e[t].amountRendiment&&a.push(["99",e[t].document_number_principal,e[t].name,`Rendimentos de ${t} - (Administradora: ${e[t].admin?e[t].admin:e[t].document_number_principal})`,convertCurrencyReal(e[t].amountRendiment||0)]),e[t].amountRendimentJCP&&r.push(["12",e[t].document_number_principal,e[t].name,`Rendimentos tributados sobre juros recebidos de (${e[t].name})`,convertCurrencyReal(e[t].amountRendimentJCP)])})),{dividends:o,jcp:n,rendiments:a,rendimentsJCP:r}}function composeBensDireitos(){const e=[];return itensWalletFiltered.forEach((t=>{e.push([getCodes(t.classe).group,getCodes(t.classe).cod,getCodes(t.classe).locale,t.document_number_principal&&""!==t.document_number_principal?t.document_number_principal:t.document_number_admin,{text:t.description,style:"description"},t.past_year,t.this_year])})),e}function composeHeaderTable(e=[],t="#300668",o="white"){const n=[];return e.forEach((e=>{n.push({text:e,fillColor:t,color:o,style:{alignment:"center"}})})),n}