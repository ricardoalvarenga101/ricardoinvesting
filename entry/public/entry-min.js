/**
 * @preserve
 * Desenvolvimento: Ricardo Alvarenga
 * Contato: ricardoinvesting10@gmail.com
 * Youtube: https://www.youtube.com/@ricardoinvesting
 * PIX: ricardoinvesting10@gmail.com
 *             _                   _       _                     _   _             
    ____      (_)                 | |     (_)                   | | (_)            
   / __ \ _ __ _  ___ __ _ _ __ __| | ___  _ _ ____   _____  ___| |_ _ _ __   __ _ 
  / / _` | '__| |/ __/ _` | '__/ _` |/ _ \| | '_ \ \ / / _ \/ __| __| | '_ \ / _` |
 | | (_| | |  | | (_| (_| | | | (_| | (_) | | | | \ V /  __/\__ \ |_| | | | | (_| |
  \ \__,_|_|  |_|\___\__,_|_|  \__,_|\___/|_|_| |_|\_/ \___||___/\__|_|_| |_|\__, |
   \____/                                                                     __/ |
                                                                             |___/ 
 * @endpreserve
 */
let _local=!0,_database={};const SELLS_OPERATIONS=["Venda","Venda Direitos de Subscrição"],CLASS_EXTERNAL=["STOCK","REIT","ETF-EXTERIOR"];function showFieldsSellWithSubscriber(e=!1,t=!1){e?($("#view_input_negociation").show(),$("#type_negociation_select").removeAttr("disabled"),t&&($("#type_negociation_select").attr("disabled","disabled"),$("#type_negociation_select").val("DIREITOS DE SUBSCRIÇÃO").change())):($("#view_input_negociation").hide(),$("#type_negociation_select").removeAttr("disabled"))}function errorLoadingData(e){}function closeReleases(){google.script.host.close()}function getDateNow(){return`${compose2Decimal((new Date).getFullYear())}-${compose2Decimal((new Date).getMonth()+1)}-${compose2Decimal((new Date).getDay())}`}function compose2Decimal(e){return e<9?`0${e}`:e}function callback(e){setTimeout((function(){$(`#${e}:visible`).removeAttr("style").fadeOut()}),1e3)}function startAnimation(e,t,a="right"){$(`#${t}`).hide(),$(`#${e}`).show("slide",{direction:a},350)}function getDabaseSuccess(e){$("#loading_spinner").hide(),$("#view_menu").show(),$("#txt_await_form").hide(),_database=e,composeTicker("ticker_select",e.tickers),composeTicker("ticker_select_provent",e.tickers,!0)}function _getTickers(){$("#loading_spinner").show(),$("#view_menu").hide(),$("#txt_await_form").show(),_local?getDabaseSuccess(MOCK_DATABASE):google.script.run.withSuccessHandler(getDabaseSuccess).withFailureHandler(errorLoadingData).getDataBase()}function savedEntry(e=null){$("#la_quantity").val(0),$("#la_price").val(0),$("#la_price_pm_sale").val(0),$("#la_price_sale").val(0),$("#la_tax").val(0),$("#la_irrf").val(0),$("#txt_await_save_form").hide(),$("#loading_spinner").hide(),$("#view_alert_success").show(),$("#txt_await_form").hide()}function _saveEntry(){$("#loading_spinner").show(),$("#view_menu").hide(),$("#txt_await_save_form").show();const e=$("#ticker_select :selected").text(),t=$("#la_data").val(),a=$("#type_select :selected").text(),i=$("#type_negociation_select :selected").text(),l=$("#la_quantity").val(),n=$("#la_price").val(),o=$("#la_price_pm_sale").val(),s=$("#la_price_sale").val(),_=$("#la_tax").val(),r=$("#la_irrf").val();google.script.run.withSuccessHandler(savedEntry).withFailureHandler(errorLoadingData).saveInput(e,t,a,i,l,n,o,s,_,r,_database[e])}function savedProvent(e=null){$("#la_quantity_provent").val(0),$("#la_value_provent").val(0),$("#la_irrf_provent").val(0),$("#la_ptax_provent").val(0),$("#txt_await_save_form").hide(),$("#loading_spinner").hide(),$("#view_alert_success").show(),$("#txt_await_form").hide()}function _saveProvent(){$("#loading_spinner").show(),$("#view_menu").hide(),$("#txt_await_form").show();const e=$("#ticker_select_provent :selected").text(),t=$("#la_data_provent").val(),a=$("#type_select_provent :selected").text(),i=$("#la_quantity_provent").val(),l=$("#la_value_provent").val(),n=$("#la_irrf_provent").val(),o=$("#la_ptax").val();google.script.run.withSuccessHandler(savedProvent).withFailureHandler(errorLoadingData).saveProvent(e,t,a,i,l,n,o)}function onChangeTypeProvent(){}function onChangeType(){const e=$("#type_select :selected").text();SELLS_OPERATIONS.includes(e)?e===SELLS_OPERATIONS[1]?(showFieldsSellWithSubscriber(!0,!0),$("#view_la_price_entry").hide(),$("#view_la_price_sale").show()):(showFieldsSellWithSubscriber(!0,!1),$("#view_la_price_entry").hide(),$("#view_la_price_sale").show()):(showFieldsSellWithSubscriber(!1,!1),$("#view_la_price_entry").show(),$("#view_la_price_sale").hide())}function composeTicker(e="",t=[],a=!1){const i=document.getElementById(e);let l="";for(let e=0;e<t.length;e++)a?l+=`<option value='${t[e]}'>${t[e]}</option>`:CLASS_EXTERNAL.includes(t[e])||(l+=`<option value='${t[e]}'>${t[e]}</option>`);i.innerHTML=l}